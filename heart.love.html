<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Heart Fire FINAL PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#fff;
}

#wrap{
  position:relative;
  width:420px;
  height:380px;
}

canvas{
  position:absolute;
  inset:0;
}

#bg{z-index:1;}
#fire{z-index:2;}
#aura{z-index:3;mix-blend-mode:screen;pointer-events:none;}
#bubble{z-index:3.5;pointer-events:none;}

#center{
  position:absolute;
  inset:0;
  z-index:4;
  display:flex;
  align-items:center;
  justify-content:center;
}

#circle{
  width:90px;
  height:90px;
  border-radius:50%;
  background:#fff;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  box-shadow:0 0 30px rgba(255,120,120,.5);
}

.day{font-size:20px;font-weight:bold;color:#ff0000;}
.time{font-size:12px;color:#ff0000;margin-top:4px;}
</style>
</head>

<body>

<div id="wrap">
  <canvas id="bg" width="420" height="380"></canvas>
  <canvas id="fire" width="420" height="380"></canvas>
  <canvas id="aura" width="420" height="380"></canvas>
  <canvas id="bubble" width="420" height="380"></canvas>

  <div id="center">
    <div id="circle">
      <div class="day">517 DAY</div>
      <div class="time" id="clock">00:00:00</div>
    </div>
  </div>
</div>

<script>
/* ===== BACKGROUND ===== */
const bg = bgCtx = document.getElementById("bg").getContext("2d");

/* ===== FIRE HEART ===== */
const fire = document.getElementById("fire").getContext("2d");

function heartPath(ctx,x,y,s){
  ctx.beginPath();
  for(let t=0;t<=Math.PI*2;t+=0.02){
    const X=16*Math.pow(Math.sin(t),3);
    const Y=13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t);
    ctx.lineTo(x+X*s,y-Y*s);
  }
  ctx.closePath();
}

function drawFire(t){
  fire.clearRect(0,0,420,380);
  const p=1+Math.sin(t*1.3)*0.04;
  heartPath(fire,210,190,8.5*p);

  const g=fire.createRadialGradient(210,200,40,210,200,160);
  g.addColorStop(0,"#ff3300");
  g.addColorStop(.5,"#ff9900");
  g.addColorStop(1,"rgba(255,200,0,.15)");

  fire.fillStyle=g;
  fire.shadowColor="orange";
  fire.shadowBlur=35;
  fire.fill();
}

/* ===== AURA ===== */
const aura=document.getElementById("aura").getContext("2d");
function drawAura(t){
  aura.clearRect(0,0,420,380);
  aura.save();
  aura.beginPath();
  aura.arc(210,190,60,0,Math.PI*2);
  aura.clip();

  const g=aura.createConicGradient(t/6,210,190);
  ["#ffd6e7","#ffe9cc","#eaffea","#e6f0ff","#f0e6ff","#ffd6e7"]
    .forEach((c,i)=>g.addColorStop(i/5,`rgba(${parseInt(c.slice(1,3),16)},${parseInt(c.slice(3,5),16)},${parseInt(c.slice(5,7),16)},.3)`));

  aura.fillStyle=g;
  aura.fillRect(140,120,140,140);
  aura.restore();
}

/* ===== HEART BUBBLE (TIKTOK) ===== */
const bubble=document.getElementById("bubble");
const btx=bubble.getContext("2d");
let bubbles=[];

function spawnHearts(x,y){
  for(let i=0;i<12;i++){
    bubbles.push({
      x:x+(Math.random()-0.5)*20,
      y:y+(Math.random()-0.5)*20,
      vy:Math.random()*1.2+0.8,
      vx:(Math.random()-0.5)*0.6,
      s:Math.random()*0.4+0.4,
      life:1,
      r:Math.random()*Math.PI
    });
  }
}

function drawHeart(ctx,x,y,s,r){
  ctx.save();
  ctx.translate(x,y);
  ctx.rotate(r);
  ctx.scale(s,s);
  ctx.beginPath();
  ctx.moveTo(0,-10);
  ctx.bezierCurveTo(-15,-25,-30,0,0,30);
  ctx.bezierCurveTo(30,0,15,-25,0,-10);
  ctx.fill();
  ctx.restore();
}

function updateBubbles(){
  btx.clearRect(0,0,420,380);
  bubbles=bubbles.filter(b=>b.life>0);
  bubbles.forEach(b=>{
    b.y-=b.vy;
    b.x+=b.vx;
    b.life-=0.015;
    b.r+=0.02;
    btx.globalAlpha=b.life;
    btx.fillStyle="rgba(255,60,120,.9)";
    drawHeart(btx,b.x,b.y,b.s*20,b.r);
  });
  btx.globalAlpha=1;
  requestAnimationFrame(updateBubbles);
}
updateBubbles();

/* ===== CLICK / TOUCH ===== */
const wrap=document.getElementById("wrap");
wrap.addEventListener("click",e=>{
  const r=wrap.getBoundingClientRect();
  spawnHearts(e.clientX-r.left,e.clientY-r.top);
});
wrap.addEventListener("touchstart",e=>{
  const r=wrap.getBoundingClientRect();
  const t=e.touches[0];
  spawnHearts(t.clientX-r.left,t.clientY-r.top);
});

/* ===== LOOP ===== */
function loop(){
  const t=performance.now()/1000;
  drawFire(t);
  drawAura(t);
  requestAnimationFrame(loop);
}
loop();

/* ===== CLOCK ===== */
setInterval(()=>{
  const d=new Date();
  clock.textContent=
    `${String(d.getHours()).padStart(2,"0")}:${String(d.getMinutes()).padStart(2,"0")}:${String(d.getSeconds()).padStart(2,"0")}`;
},1000);
</script>

</body>
</html>
